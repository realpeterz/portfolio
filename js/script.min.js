var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";return this},searchString:function(a){for(var b=0;b<a.length;b++){var d=a[b].string,c=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(d){if(d.indexOf(a[b].subString)!=-1)return a[b].identity}else if(c)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b!=-1)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,
subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],
dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
window.App={init:function(){this.userBrowser=BrowserDetect.init();this.bindNavOnClick();jQuery.browser.mobile||(this.bindPerScroll(),this.bindViewSwitchOnClick(),this.dragNdrop(),this.bringPicToFrontOnClick(),this.enableFancybox(),this.bindSlidingEffect());this.socialIconFisheye();this.checkBrowser();this.setErrorMessages();this.ajaxSendMail();this.bindValidate();jQuery.browser.mobile||(location.hash||$("nav li:first").trigger("click"),$("#logo").click(function(){window.location.hash="home"}));$("input, textarea").placeholder()},
mydata:{dialog:["Howdy!","Take a look!","Interested?","Let's talk!"],scrollTo:["#home","#portfolio","#resume","#contact"]},checkBrowser:function(){switch(this.userBrowser.browser){case "Chrome":$(".browser").css("background-position","-6px center");break;case "Firefox":$(".browser").css("background-position","-78px center");break;case "Opera":$(".browser").css("background-position","-146px center");break;case "Safari":$(".browser").css("background-position","-208px center");break;case "Explorer":$(".browser").css("background-position",
"-284px -2px");break;default:$("#browser-detect").removeClass("browser").addClass("browser-generic")}},speak:function(){if(!(window.innerWidth<=1140)){var a=$(this).index("#nav li");$("#dialog").text("").fadeOut("fast").fadeIn("fast",function(){$(this).text(App.mydata.dialog[a])})}},scroll:function(){var a=$(this).index(),b=$(App.mydata.scrollTo[a]);$(window).data("scrollingTo",1);$(window).scrollTo(b,500,{onAfter:function(){location.hash=App.mydata.scrollTo[a];$(window).removeData("scrollingTo");
return"Animated scrolling done"}})},addActive:function(a){if($(this).data("active")!==1){var b=$(this).text().toLowerCase();$(this).find("div").get(0).className+="-hover";$(this).addClass("sprite-glow").data("active",1);$("#nav").data("current",b);a&&typeof a==="function"&&a.call(this)}},removeActive:function(){if($(this).data("active")===1){$(this).data("active",0);var a=$(this).find("div").get(0);a.className=a.className.match(/.*(?=-hover)/);$(this).removeClass("sprite-glow");return"hover effect removed"}},
bindNavOnClick:function(){$("header").delegate("#nav li","click",function(a){a.preventDefault();$("#nav li").each(function(){App.removeActive.call(this)});App.addActive.call(this);App.speak.call(this);App.scroll.call(this)})},bindPerScroll:function(){$(window).bind("perScrollNavSynch",function(){var a=$("section:in-viewport").attr("id"),b=$("#nav").data("current");a&&a!==b&&$(window).data("scrollingTo")!==1&&$("#nav li").each(function(){var b=$(this),b=b.text().toLowerCase();App.removeActive.call(this);
a==b&&App.addActive.call(this,function(){App.speak.call(this)});b=b=void 0})});$(window).scroll($.throttle(300,function(){$(this).triggerHandler("perScrollNavSynch")}))},bindViewSwitchOnClick:function(){$("#view-switch").delegate("a","click",function(){var a=$(this),b=$("#view-switch"),d=a.parent().index();$("a",b).removeClass("view-active");a.addClass("view-active");$("#showcases").hide("fast",function(){$("#grid-view, #gallery, #list-view").hide();$("#showcases").show();switch(d){case 0:$("#gallery").show(200);
$("#dropin-bt").fadeIn();break;case 1:$("#dropin-bt").hide("fast",function(){$("#grid-view").show(500,"easeInOutElastic")});break;case 2:$("#dropin-bt").hide("fast",function(){$("#list-view").show(500,"easeInOutElastic")})}});return!1})},bringPicToFrontOnClick:function(){$(".pic").mousedown(function(a){var b=0;$(".pic").each(function(){var a=parseInt($(this).css("zIndex"));a>b&&(b=a)});$(a.target).hasClass("pic")?$(a.target).css({zIndex:b+1}):$(a.target).closest(".pic").css({zIndex:b+1})})},bindSlidingEffect:function(){$(".thumb-wrap").hover(function(){$(".external-link",
this).show("300");$(".magnifier",this).show("300")},function(){$(".external-link",this).hide();$(".magnifier",this).hide()})},dragNdrop:function(){$(".pic").draggable({opacity:0.8,scroll:!0});$("#dropin-bt").droppable({hoverClass:"hoverdrop",drop:function(a,b){confirm("The live site will open in a new tab. Is that ok?")&&window.open(b.draggable.data("livesite"))}})},enableFancybox:function(){$("a.fancybox, a.magnifier").fancybox({speedIn:400,speedOut:100,overlayShow:!1,titlePosition:"over",hideOnOverlayClick:!1,
onStart:function(){},onComplete:function(){var a=this,b=$("div#fancybox-title-over");b.wrapInner('<h3 style="margin-bottom: 0.5em;"></h3>').append("<a href='#' id='show-des'>Show Description</a><a href='#' id='show-tech'>Show Technology</a>");$.ajax({url:"js/images.json",type:"GET",dataType:"json",cache:!1,success:function(d){var d=$(d).select(function(){return this.title===a.title}),c=d[0],d=$("<div/>",{id:"description",text:c.description,style:"display:none; padding-top:0.5em; clear:both;"}),c=
$("<div/>",{id:"technology",text:c.technology,style:"display:none; padding-top: 0.5em; clear:both;  min-height: 3em;"});b.append(d,c);$("#show-des").data("elemToShow",{elem:$("#description"),tag:"Description"});$("#show-tech").data("elemToShow",{elem:$("#technology"),tag:"Technology"});var e=function(a){var b=a.data("elemToShow").elem,c=a.data("elemToShow").tag,d=b.siblings("div");b.is(":hidden")&&(a.text(c).css({color:"#15D9EA",textDecoration:"none",fontSize:"1.2em",fontWeight:"bold"}).siblings("a").text("Show "+
a.siblings("a").data("elemToShow").tag).css({color:"#fff",fontSize:"1em"}),d.hide("50",function(){b.fadeIn("400")}))};$("#show-des, #show-tech").css({color:"#fff",textDecoration:"none",display:"block","float":"left",width:"50%",fontWeight:"bold"}).mouseenter(function(){e($(this))}).click(function(a){a.preventDefault()})}})}});$("a.fancybox-alt").fancybox({speedIn:400,speedOut:100,overlayShow:!1,hideOnOverlayClick:!1})},socialIconFisheye:function(){$("#social li").transform({scale:[0.9,0.9]});$("#social li").hover(function(){$(this).animate({scale:[[1,
1]],rotate:"-45deg"})},function(){$(this).animate({scale:[[0.9,0.9]],rotate:"0deg"},200,"easeOutQuad")})},setErrorMessages:function(){var a={fontStyle:"italic",color:"#FA4A4A",fontSize:"16px"},b=$("<div/>",{id:"error-name",text:"* Must be a legit human name without special characters",css:a}),d=$("<div/>",{id:"error-email",text:"* Must be a valid email address",css:a}),c=$("<div/>",{id:"error-message",text:"* Message should be at least 15 characters",css:a});this.$errorEmpty=$("<div/>",{"class":"error-empty",
text:"* Must NOT be empty",css:a});$("#name").data("error",b);$("#email").data("error",d);$("#message").data("error",c)},validateEmailHandler:function(){var a=/^([a-zA-Z]+(?:\.)?(?: [a-zA-Z]+(?:\.)?)*)$/,b=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)$/,d=this.id,c=$(this),e=$.trim(c.val()),f;switch(d){case "name":f=a.test(e);break;case "email":f=b.test(e);break;case "message":f=
e.length>=15}e===""?(c.data("valid",!1),c.data("error").length&&c.data("error").remove(),c.prev(".error-empty").length||c.before(App.$errorEmpty.clone())):(c.prev(".error-empty").length&&c.prev(".error-empty").remove(),f?(c.data("valid",!0),c.data("error").remove()):(c.data("valid",!1),c.before(c.data("error"))))},bindValidate:function(){$("#name, #email, #message").keyup($.debounce(300,App.validateEmailHandler));$("#name, #email, #message").blur(App.validateEmailHandler)},ajaxSendMail:function(){$("#email-form button").click(function(a){a.preventDefault();
$("#name, #email, #message").each(App.validateEmailHandler);$("#name").data("valid")&&$("#email").data("valid")&&$("#message").data("valid")&&($("#name, #email, #message").each(function(){$(this).val($.trim($(this).val()))}),a=$("#email-form").serialize(),$.ajax({type:"POST",url:"mylibs/sendmail.php",data:a,beforeSend:function(){var a=$("<img></img>",{id:"spinner",src:"img/spinner.gif",alt:"Sending, please wait!",css:{margin:"25% 0 0 40%"}});$("#email-form").fadeOut("fast",function(){a.insertBefore("#email-form")})},
complete:function(){$("img#spinner").remove();$("#email-form").fadeIn();$("#email-headline").fadeIn();$(":input, textarea","#email-form").val("");$("input, textarea").placeholder()},success:function(a){var d=$("<img/>",{src:"img/icon/success.png",css:{display:"inline",marginRight:"5px"}}),c=$.parseJSON(a);c.yep?$("#email-headline").fadeOut(function(){$(this).html(c.yep).prepend(d)}):c.nope&&(d.attr("src","img/icon/error.png"),$("#email-headline").fadeOut("fast",function(){$(this).html(c.nope).prepend(d)}))}}))})}};
jQuery(function(a){App.init();if(isiPad=navigator.userAgent.match(/iPad/i)!=null)a(".sprite-list-view").click(),document.getElementById("view-switch").style.display="none",document.getElementById("dropin-bt").style.display="none"});
